{"version":3,"sources":["widgets/mouse.js"],"names":["define","$","mouseHandled","document","on","widget","version","options","cancel","distance","delay","_mouseInit","that","this","element","widgetName","event","_mouseDown","data","target","removeData","stopImmediatePropagation","started","_mouseDestroy","off","_mouseMoveDelegate","_mouseUpDelegate","_mouseMoved","_mouseStarted","_mouseUp","_mouseDownEvent","btnIsLeft","which","elIsCancel","nodeName","closest","length","_mouseCapture","mouseDelayMet","_mouseDelayTimer","setTimeout","_mouseDistanceMet","_mouseDelayMet","_mouseStart","preventDefault","_mouseMove","ui","ie","documentMode","button","originalEvent","altKey","ctrlKey","metaKey","shiftKey","ignoreMissingWhich","_mouseDrag","_mouseStop","clearTimeout","Math","max","abs","pageX","pageY"],"mappings":"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","file":"../../widgets/mouse.js","sourcesContent":["/*!\r\n * jQuery UI Mouse @VERSION\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n */\r\n\r\n//>>label: Mouse\r\n//>>group: Widgets\r\n//>>description: Abstracts mouse-based interactions to assist in creating certain widgets.\r\n//>>docs: http://api.jqueryui.com/mouse/\r\n\r\ndefine( [\r\n\t\t\t\"skylark-jquery\",\r\n\t\t\t\"../ie\",\r\n\t\t\t\"../version\",\r\n\t\t\t\"../widget\"\r\n],function( $ ) {\r\n\r\nvar mouseHandled = false;\r\n$( document ).on( \"mouseup\", function() {\r\n\tmouseHandled = false;\r\n} );\r\n\r\nreturn $.widget( \"ui.mouse\", {\r\n\tversion: \"@VERSION\",\r\n\toptions: {\r\n\t\tcancel: \"input, textarea, button, select, option\",\r\n\t\tdistance: 1,\r\n\t\tdelay: 0\r\n\t},\r\n\t_mouseInit: function() {\r\n\t\tvar that = this;\r\n\r\n\t\tthis.element\r\n\t\t\t.on( \"mousedown.\" + this.widgetName, function( event ) {\r\n\t\t\t\treturn that._mouseDown( event );\r\n\t\t\t} )\r\n\t\t\t.on( \"click.\" + this.widgetName, function( event ) {\r\n\t\t\t\tif ( true === $.data( event.target, that.widgetName + \".preventClickEvent\" ) ) {\r\n\t\t\t\t\t$.removeData( event.target, that.widgetName + \".preventClickEvent\" );\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\tthis.started = false;\r\n\t},\r\n\r\n\t// TODO: make sure destroying one instance of mouse doesn't mess with\r\n\t// other instances of mouse\r\n\t_mouseDestroy: function() {\r\n\t\tthis.element.off( \".\" + this.widgetName );\r\n\t\tif ( this._mouseMoveDelegate ) {\r\n\t\t\tthis.document\r\n\t\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\r\n\t\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\r\n\t\t}\r\n\t},\r\n\r\n\t_mouseDown: function( event ) {\r\n\r\n\t\t// don't let more than one widget handle mouseStart\r\n\t\tif ( mouseHandled ) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis._mouseMoved = false;\r\n\r\n\t\t// We may have missed mouseup (out of window)\r\n\t\t( this._mouseStarted && this._mouseUp( event ) );\r\n\r\n\t\tthis._mouseDownEvent = event;\r\n\r\n\t\tvar that = this,\r\n\t\t\tbtnIsLeft = ( event.which === 1 ),\r\n\r\n\t\t\t// event.target.nodeName works around a bug in IE 8 with\r\n\t\t\t// disabled inputs (#7620)\r\n\t\t\telIsCancel = ( typeof this.options.cancel === \"string\" && event.target.nodeName ?\r\n\t\t\t\t$( event.target ).closest( this.options.cancel ).length : false );\r\n\t\tif ( !btnIsLeft || elIsCancel || !this._mouseCapture( event ) ) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tthis.mouseDelayMet = !this.options.delay;\r\n\t\tif ( !this.mouseDelayMet ) {\r\n\t\t\tthis._mouseDelayTimer = setTimeout( function() {\r\n\t\t\t\tthat.mouseDelayMet = true;\r\n\t\t\t}, this.options.delay );\r\n\t\t}\r\n\r\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\r\n\t\t\tthis._mouseStarted = ( this._mouseStart( event ) !== false );\r\n\t\t\tif ( !this._mouseStarted ) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Click event may never have fired (Gecko & Opera)\r\n\t\tif ( true === $.data( event.target, this.widgetName + \".preventClickEvent\" ) ) {\r\n\t\t\t$.removeData( event.target, this.widgetName + \".preventClickEvent\" );\r\n\t\t}\r\n\r\n\t\t// These delegates are required to keep context\r\n\t\tthis._mouseMoveDelegate = function( event ) {\r\n\t\t\treturn that._mouseMove( event );\r\n\t\t};\r\n\t\tthis._mouseUpDelegate = function( event ) {\r\n\t\t\treturn that._mouseUp( event );\r\n\t\t};\r\n\r\n\t\tthis.document\r\n\t\t\t.on( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\r\n\t\t\t.on( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t\tmouseHandled = true;\r\n\t\treturn true;\r\n\t},\r\n\r\n\t_mouseMove: function( event ) {\r\n\r\n\t\t// Only check for mouseups outside the document if you've moved inside the document\r\n\t\t// at least once. This prevents the firing of mouseup in the case of IE<9, which will\r\n\t\t// fire a mousemove event if content is placed under the cursor. See #7778\r\n\t\t// Support: IE <9\r\n\t\tif ( this._mouseMoved ) {\r\n\r\n\t\t\t// IE mouseup check - mouseup happened when mouse was out of window\r\n\t\t\tif ( $.ui.ie && ( !document.documentMode || document.documentMode < 9 ) &&\r\n\t\t\t\t\t!event.button ) {\r\n\t\t\t\treturn this._mouseUp( event );\r\n\r\n\t\t\t// Iframe mouseup check - mouseup occurred in another document\r\n\t\t\t} else if ( !event.which ) {\r\n\r\n\t\t\t\t// Support: Safari <=8 - 9\r\n\t\t\t\t// Safari sets which to 0 if you press any of the following keys\r\n\t\t\t\t// during a drag (#14461)\r\n\t\t\t\tif ( event.originalEvent.altKey || event.originalEvent.ctrlKey ||\r\n\t\t\t\t\t\tevent.originalEvent.metaKey || event.originalEvent.shiftKey ) {\r\n\t\t\t\t\tthis.ignoreMissingWhich = true;\r\n\t\t\t\t} else if ( !this.ignoreMissingWhich ) {\r\n\t\t\t\t\treturn this._mouseUp( event );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif ( event.which || event.button ) {\r\n\t\t\tthis._mouseMoved = true;\r\n\t\t}\r\n\r\n\t\tif ( this._mouseStarted ) {\r\n\t\t\tthis._mouseDrag( event );\r\n\t\t\treturn event.preventDefault();\r\n\t\t}\r\n\r\n\t\tif ( this._mouseDistanceMet( event ) && this._mouseDelayMet( event ) ) {\r\n\t\t\tthis._mouseStarted =\r\n\t\t\t\t( this._mouseStart( this._mouseDownEvent, event ) !== false );\r\n\t\t\t( this._mouseStarted ? this._mouseDrag( event ) : this._mouseUp( event ) );\r\n\t\t}\r\n\r\n\t\treturn !this._mouseStarted;\r\n\t},\r\n\r\n\t_mouseUp: function( event ) {\r\n\t\tthis.document\r\n\t\t\t.off( \"mousemove.\" + this.widgetName, this._mouseMoveDelegate )\r\n\t\t\t.off( \"mouseup.\" + this.widgetName, this._mouseUpDelegate );\r\n\r\n\t\tif ( this._mouseStarted ) {\r\n\t\t\tthis._mouseStarted = false;\r\n\r\n\t\t\tif ( event.target === this._mouseDownEvent.target ) {\r\n\t\t\t\t$.data( event.target, this.widgetName + \".preventClickEvent\", true );\r\n\t\t\t}\r\n\r\n\t\t\tthis._mouseStop( event );\r\n\t\t}\r\n\r\n\t\tif ( this._mouseDelayTimer ) {\r\n\t\t\tclearTimeout( this._mouseDelayTimer );\r\n\t\t\tdelete this._mouseDelayTimer;\r\n\t\t}\r\n\r\n\t\tthis.ignoreMissingWhich = false;\r\n\t\tmouseHandled = false;\r\n\t\tevent.preventDefault();\r\n\t},\r\n\r\n\t_mouseDistanceMet: function( event ) {\r\n\t\treturn ( Math.max(\r\n\t\t\t\tMath.abs( this._mouseDownEvent.pageX - event.pageX ),\r\n\t\t\t\tMath.abs( this._mouseDownEvent.pageY - event.pageY )\r\n\t\t\t) >= this.options.distance\r\n\t\t);\r\n\t},\r\n\r\n\t_mouseDelayMet: function( /* event */ ) {\r\n\t\treturn this.mouseDelayMet;\r\n\t},\r\n\r\n\t// These are placeholder methods, to be overriden by extending plugin\r\n\t_mouseStart: function( /* event */ ) {},\r\n\t_mouseDrag: function( /* event */ ) {},\r\n\t_mouseStop: function( /* event */ ) {},\r\n\t_mouseCapture: function( /* event */ ) { return true; }\r\n} );\r\n\r\n});\r\n"]}