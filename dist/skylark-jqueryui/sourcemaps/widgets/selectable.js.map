{"version":3,"sources":["widgets/selectable.js"],"names":["define","$","widget","ui","mouse","version","options","appendTo","autoRefresh","distance","filter","tolerance","selected","selecting","start","stop","unselected","unselecting","_create","that","this","_addClass","dragged","refresh","elementPos","element","offset","selectees","each","$this","selecteeOffset","pos","left","top","data","$element","right","outerWidth","bottom","outerHeight","startselected","hasClass","_mouseInit","helper","_destroy","removeData","_mouseDestroy","_mouseStart","event","opos","pageX","pageY","disabled","_trigger","append","css","width","height","selectee","metaKey","ctrlKey","_removeClass","target","parents","addBack","doSelect","_mouseDrag","tmp","x1","y1","x2","y2","hit","_mouseStop","remove"],"mappings":"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","file":"../../widgets/selectable.js","sourcesContent":["/*!\n * jQuery UI Selectable @VERSION\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Selectable\n//>>group: Interactions\n//>>description: Allows groups of elements to be selected with the mouse.\n//>>docs: http://api.jqueryui.com/selectable/\n//>>demos: http://jqueryui.com/selectable/\n//>>css.structure: ../../themes/base/selectable.css\n\ndefine( [\n\t\t\t\"skylark-jquery\",\n\t\t\t\"./mouse\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n],function( $ ) {\n\nreturn $.widget( \"ui.selectable\", $.ui.mouse, {\n\tversion: \"@VERSION\",\n\toptions: {\n\t\tappendTo: \"body\",\n\t\tautoRefresh: true,\n\t\tdistance: 0,\n\t\tfilter: \"*\",\n\t\ttolerance: \"touch\",\n\n\t\t// Callbacks\n\t\tselected: null,\n\t\tselecting: null,\n\t\tstart: null,\n\t\tstop: null,\n\t\tunselected: null,\n\t\tunselecting: null\n\t},\n\t_create: function() {\n\t\tvar that = this;\n\n\t\tthis._addClass( \"ui-selectable\" );\n\n\t\tthis.dragged = false;\n\n\t\t// Cache selectee children based on filter\n\t\tthis.refresh = function() {\n\t\t\tthat.elementPos = $( that.element[ 0 ] ).offset();\n\t\t\tthat.selectees = $( that.options.filter, that.element[ 0 ] );\n\t\t\tthat._addClass( that.selectees, \"ui-selectee\" );\n\t\t\tthat.selectees.each( function() {\n\t\t\t\tvar $this = $( this ),\n\t\t\t\t\tselecteeOffset = $this.offset(),\n\t\t\t\t\tpos = {\n\t\t\t\t\t\tleft: selecteeOffset.left - that.elementPos.left,\n\t\t\t\t\t\ttop: selecteeOffset.top - that.elementPos.top\n\t\t\t\t\t};\n\t\t\t\t$.data( this, \"selectable-item\", {\n\t\t\t\t\telement: this,\n\t\t\t\t\t$element: $this,\n\t\t\t\t\tleft: pos.left,\n\t\t\t\t\ttop: pos.top,\n\t\t\t\t\tright: pos.left + $this.outerWidth(),\n\t\t\t\t\tbottom: pos.top + $this.outerHeight(),\n\t\t\t\t\tstartselected: false,\n\t\t\t\t\tselected: $this.hasClass( \"ui-selected\" ),\n\t\t\t\t\tselecting: $this.hasClass( \"ui-selecting\" ),\n\t\t\t\t\tunselecting: $this.hasClass( \"ui-unselecting\" )\n\t\t\t\t} );\n\t\t\t} );\n\t\t};\n\t\tthis.refresh();\n\n\t\tthis._mouseInit();\n\n\t\tthis.helper = $( \"<div>\" );\n\t\tthis._addClass( this.helper, \"ui-selectable-helper\" );\n\t},\n\n\t_destroy: function() {\n\t\tthis.selectees.removeData( \"selectable-item\" );\n\t\tthis._mouseDestroy();\n\t},\n\n\t_mouseStart: function( event ) {\n\t\tvar that = this,\n\t\t\toptions = this.options;\n\n\t\tthis.opos = [ event.pageX, event.pageY ];\n\t\tthis.elementPos = $( this.element[ 0 ] ).offset();\n\n\t\tif ( this.options.disabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.selectees = $( options.filter, this.element[ 0 ] );\n\n\t\tthis._trigger( \"start\", event );\n\n\t\t$( options.appendTo ).append( this.helper );\n\n\t\t// position helper (lasso)\n\t\tthis.helper.css( {\n\t\t\t\"left\": event.pageX,\n\t\t\t\"top\": event.pageY,\n\t\t\t\"width\": 0,\n\t\t\t\"height\": 0\n\t\t} );\n\n\t\tif ( options.autoRefresh ) {\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tthis.selectees.filter( \".ui-selected\" ).each( function() {\n\t\t\tvar selectee = $.data( this, \"selectable-item\" );\n\t\t\tselectee.startselected = true;\n\t\t\tif ( !event.metaKey && !event.ctrlKey ) {\n\t\t\t\tthat._removeClass( selectee.$element, \"ui-selected\" );\n\t\t\t\tselectee.selected = false;\n\t\t\t\tthat._addClass( selectee.$element, \"ui-unselecting\" );\n\t\t\t\tselectee.unselecting = true;\n\n\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\tthat._trigger( \"unselecting\", event, {\n\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\t$( event.target ).parents().addBack().each( function() {\n\t\t\tvar doSelect,\n\t\t\t\tselectee = $.data( this, \"selectable-item\" );\n\t\t\tif ( selectee ) {\n\t\t\t\tdoSelect = ( !event.metaKey && !event.ctrlKey ) ||\n\t\t\t\t\t!selectee.$element.hasClass( \"ui-selected\" );\n\t\t\t\tthat._removeClass( selectee.$element, doSelect ? \"ui-unselecting\" : \"ui-selected\" )\n\t\t\t\t\t._addClass( selectee.$element, doSelect ? \"ui-selecting\" : \"ui-unselecting\" );\n\t\t\t\tselectee.unselecting = !doSelect;\n\t\t\t\tselectee.selecting = doSelect;\n\t\t\t\tselectee.selected = doSelect;\n\n\t\t\t\t// selectable (UN)SELECTING callback\n\t\t\t\tif ( doSelect ) {\n\t\t\t\t\tthat._trigger( \"selecting\", event, {\n\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tthat._trigger( \"unselecting\", event, {\n\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} );\n\n\t},\n\n\t_mouseDrag: function( event ) {\n\n\t\tthis.dragged = true;\n\n\t\tif ( this.options.disabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar tmp,\n\t\t\tthat = this,\n\t\t\toptions = this.options,\n\t\t\tx1 = this.opos[ 0 ],\n\t\t\ty1 = this.opos[ 1 ],\n\t\t\tx2 = event.pageX,\n\t\t\ty2 = event.pageY;\n\n\t\tif ( x1 > x2 ) { tmp = x2; x2 = x1; x1 = tmp; }\n\t\tif ( y1 > y2 ) { tmp = y2; y2 = y1; y1 = tmp; }\n\t\tthis.helper.css( { left: x1, top: y1, width: x2 - x1, height: y2 - y1 } );\n\n\t\tthis.selectees.each( function() {\n\t\t\tvar selectee = $.data( this, \"selectable-item\" ),\n\t\t\t\thit = false,\n\t\t\t\toffset = {};\n\n\t\t\t//prevent helper from being selected if appendTo: selectable\n\t\t\tif ( !selectee || selectee.element === that.element[ 0 ] ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\toffset.left   = selectee.left   + that.elementPos.left;\n\t\t\toffset.right  = selectee.right  + that.elementPos.left;\n\t\t\toffset.top    = selectee.top    + that.elementPos.top;\n\t\t\toffset.bottom = selectee.bottom + that.elementPos.top;\n\n\t\t\tif ( options.tolerance === \"touch\" ) {\n\t\t\t\thit = ( !( offset.left > x2 || offset.right < x1 || offset.top > y2 ||\n                    offset.bottom < y1 ) );\n\t\t\t} else if ( options.tolerance === \"fit\" ) {\n\t\t\t\thit = ( offset.left > x1 && offset.right < x2 && offset.top > y1 &&\n                    offset.bottom < y2 );\n\t\t\t}\n\n\t\t\tif ( hit ) {\n\n\t\t\t\t// SELECT\n\t\t\t\tif ( selectee.selected ) {\n\t\t\t\t\tthat._removeClass( selectee.$element, \"ui-selected\" );\n\t\t\t\t\tselectee.selected = false;\n\t\t\t\t}\n\t\t\t\tif ( selectee.unselecting ) {\n\t\t\t\t\tthat._removeClass( selectee.$element, \"ui-unselecting\" );\n\t\t\t\t\tselectee.unselecting = false;\n\t\t\t\t}\n\t\t\t\tif ( !selectee.selecting ) {\n\t\t\t\t\tthat._addClass( selectee.$element, \"ui-selecting\" );\n\t\t\t\t\tselectee.selecting = true;\n\n\t\t\t\t\t// selectable SELECTING callback\n\t\t\t\t\tthat._trigger( \"selecting\", event, {\n\t\t\t\t\t\tselecting: selectee.element\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// UNSELECT\n\t\t\t\tif ( selectee.selecting ) {\n\t\t\t\t\tif ( ( event.metaKey || event.ctrlKey ) && selectee.startselected ) {\n\t\t\t\t\t\tthat._removeClass( selectee.$element, \"ui-selecting\" );\n\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\tthat._addClass( selectee.$element, \"ui-selected\" );\n\t\t\t\t\t\tselectee.selected = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthat._removeClass( selectee.$element, \"ui-selecting\" );\n\t\t\t\t\t\tselectee.selecting = false;\n\t\t\t\t\t\tif ( selectee.startselected ) {\n\t\t\t\t\t\t\tthat._addClass( selectee.$element, \"ui-unselecting\" );\n\t\t\t\t\t\t\tselectee.unselecting = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\tthat._trigger( \"unselecting\", event, {\n\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ( selectee.selected ) {\n\t\t\t\t\tif ( !event.metaKey && !event.ctrlKey && !selectee.startselected ) {\n\t\t\t\t\t\tthat._removeClass( selectee.$element, \"ui-selected\" );\n\t\t\t\t\t\tselectee.selected = false;\n\n\t\t\t\t\t\tthat._addClass( selectee.$element, \"ui-unselecting\" );\n\t\t\t\t\t\tselectee.unselecting = true;\n\n\t\t\t\t\t\t// selectable UNSELECTING callback\n\t\t\t\t\t\tthat._trigger( \"unselecting\", event, {\n\t\t\t\t\t\t\tunselecting: selectee.element\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\n\t\treturn false;\n\t},\n\n\t_mouseStop: function( event ) {\n\t\tvar that = this;\n\n\t\tthis.dragged = false;\n\n\t\t$( \".ui-unselecting\", this.element[ 0 ] ).each( function() {\n\t\t\tvar selectee = $.data( this, \"selectable-item\" );\n\t\t\tthat._removeClass( selectee.$element, \"ui-unselecting\" );\n\t\t\tselectee.unselecting = false;\n\t\t\tselectee.startselected = false;\n\t\t\tthat._trigger( \"unselected\", event, {\n\t\t\t\tunselected: selectee.element\n\t\t\t} );\n\t\t} );\n\t\t$( \".ui-selecting\", this.element[ 0 ] ).each( function() {\n\t\t\tvar selectee = $.data( this, \"selectable-item\" );\n\t\t\tthat._removeClass( selectee.$element, \"ui-selecting\" )\n\t\t\t\t._addClass( selectee.$element, \"ui-selected\" );\n\t\t\tselectee.selecting = false;\n\t\t\tselectee.selected = true;\n\t\t\tselectee.startselected = true;\n\t\t\tthat._trigger( \"selected\", event, {\n\t\t\t\tselected: selectee.element\n\t\t\t} );\n\t\t} );\n\t\tthis._trigger( \"stop\", event );\n\n\t\tthis.helper.remove();\n\n\t\treturn false;\n\t}\n\n} );\n\n});\n"]}