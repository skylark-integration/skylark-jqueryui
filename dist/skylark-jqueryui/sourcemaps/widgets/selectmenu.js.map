{"version":3,"sources":["widgets/selectmenu.js"],"names":["define","$","widget","ui","formResetMixin","version","defaultElement","options","appendTo","classes","ui-selectmenu-button-open","ui-selectmenu-button-closed","disabled","icons","button","position","my","at","collision","width","change","close","focus","open","select","_create","selectmenuId","this","element","uniqueId","attr","ids","menu","_drawButton","_drawMenu","_bindFormResetHandler","_rendered","menuItems","icon","that","item","_parseOption","find","selectedIndex","labels","_on","click","event","preventDefault","hide","tabindex","id","role","aria-expanded","aria-autocomplete","aria-owns","aria-haspopup","title","insertAfter","_addClass","buttonItem","_renderButtonItem","_resizeButton","_buttonEvents","one","_refreshMenu","aria-hidden","aria-labelledby","menuWrap","append","_appendTo","menuInstance","ui-menu","_setSelection","_select","data","focusIndex","index","_trigger","isOpen","eq","_off","_closeOnDocumentClick","_isDivider","refresh","replaceWith","_getSelectedItem","empty","_parseOptions","_renderMenu","items","not","length","_setAria","_setOption","prop","_removeClass","_toggleAttr","_resizeMenu","_position","document","_documentClick","extend","of","range","menuWidget","_setText","label","ul","currentOptgroup","each","li","optgroup","text","parent","_renderItemData","_renderItem","wrapper","value","html","_move","direction","next","filter","_toggle","selection","window","getSelection","removeAllRanges","addRange","mousedown","target","closest","escapeSelector","rangeCount","getRangeAt","createRange","keydown","keyCode","TAB","ESCAPE","ENTER","_selectFocusedItem","UP","altKey","DOWN","SPACE","LEFT","RIGHT","HOME","PAGE_UP","END","PAGE_DOWN","trigger","hasClass","oldIndex","aria-activedescendant","key","_super","_setOptionDisabled","option","_toggleClass","jquery","nodeType","body","css","show","outerWidth","Math","max","_getCreateOptions","hidden","push","val","_destroy","_unbindFormResetHandler","remove","removeUniqueId"],"mappings":"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","file":"../../widgets/selectmenu.js","sourcesContent":["/*!\n * jQuery UI Selectmenu @VERSION\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Selectmenu\n//>>group: Widgets\n// jscs:disable maximumLineLength\n//>>description: Duplicates and extends the functionality of a native HTML select element, allowing it to be customizable in behavior and appearance far beyond the limitations of a native select.\n// jscs:enable maximumLineLength\n//>>docs: http://api.jqueryui.com/selectmenu/\n//>>demos: http://jqueryui.com/selectmenu/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/selectmenu.css, ../../themes/base/button.css\n//>>css.theme: ../../themes/base/theme.css\n\ndefine( [\n\t\t\t\"skylark-jquery\",\n\t\t\t\"./menu\",\n\t\t\t\"../escape-selector\",\n\t\t\t\"../form-reset-mixin\",\n\t\t\t\"../keycode\",\n\t\t\t\"../labels\",\n\t\t\t\"../position\",\n\t\t\t\"../unique-id\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n],function( $ ) {\n\nreturn $.widget( \"ui.selectmenu\", [ $.ui.formResetMixin, {\n\tversion: \"@VERSION\",\n\tdefaultElement: \"<select>\",\n\toptions: {\n\t\tappendTo: null,\n\t\tclasses: {\n\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-top\",\n\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-all\"\n\t\t},\n\t\tdisabled: null,\n\t\ticons: {\n\t\t\tbutton: \"ui-icon-triangle-1-s\"\n\t\t},\n\t\tposition: {\n\t\t\tmy: \"left top\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"none\"\n\t\t},\n\t\twidth: false,\n\n\t\t// Callbacks\n\t\tchange: null,\n\t\tclose: null,\n\t\tfocus: null,\n\t\topen: null,\n\t\tselect: null\n\t},\n\n\t_create: function() {\n\t\tvar selectmenuId = this.element.uniqueId().attr( \"id\" );\n\t\tthis.ids = {\n\t\t\telement: selectmenuId,\n\t\t\tbutton: selectmenuId + \"-button\",\n\t\t\tmenu: selectmenuId + \"-menu\"\n\t\t};\n\n\t\tthis._drawButton();\n\t\tthis._drawMenu();\n\t\tthis._bindFormResetHandler();\n\n\t\tthis._rendered = false;\n\t\tthis.menuItems = $();\n\t},\n\n\t_drawButton: function() {\n\t\tvar icon,\n\t\t\tthat = this,\n\t\t\titem = this._parseOption(\n\t\t\t\tthis.element.find( \"option:selected\" ),\n\t\t\t\tthis.element[ 0 ].selectedIndex\n\t\t\t);\n\n\t\t// Associate existing label with the new button\n\t\tthis.labels = this.element.labels().attr( \"for\", this.ids.button );\n\t\tthis._on( this.labels, {\n\t\t\tclick: function( event ) {\n\t\t\t\tthis.button.focus();\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t} );\n\n\t\t// Hide original select element\n\t\tthis.element.hide();\n\n\t\t// Create button\n\t\tthis.button = $( \"<span>\", {\n\t\t\ttabindex: this.options.disabled ? -1 : 0,\n\t\t\tid: this.ids.button,\n\t\t\trole: \"combobox\",\n\t\t\t\"aria-expanded\": \"false\",\n\t\t\t\"aria-autocomplete\": \"list\",\n\t\t\t\"aria-owns\": this.ids.menu,\n\t\t\t\"aria-haspopup\": \"true\",\n\t\t\ttitle: this.element.attr( \"title\" )\n\t\t} )\n\t\t\t.insertAfter( this.element );\n\n\t\tthis._addClass( this.button, \"ui-selectmenu-button ui-selectmenu-button-closed\",\n\t\t\t\"ui-button ui-widget\" );\n\n\t\ticon = $( \"<span>\" ).appendTo( this.button );\n\t\tthis._addClass( icon, \"ui-selectmenu-icon\", \"ui-icon \" + this.options.icons.button );\n\t\tthis.buttonItem = this._renderButtonItem( item )\n\t\t\t.appendTo( this.button );\n\n\t\tif ( this.options.width !== false ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\n\t\tthis._on( this.button, this._buttonEvents );\n\t\tthis.button.one( \"focusin\", function() {\n\n\t\t\t// Delay rendering the menu items until the button receives focus.\n\t\t\t// The menu may have already been rendered via a programmatic open.\n\t\t\tif ( !that._rendered ) {\n\t\t\t\tthat._refreshMenu();\n\t\t\t}\n\t\t} );\n\t},\n\n\t_drawMenu: function() {\n\t\tvar that = this;\n\n\t\t// Create menu\n\t\tthis.menu = $( \"<ul>\", {\n\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\"aria-labelledby\": this.ids.button,\n\t\t\tid: this.ids.menu\n\t\t} );\n\n\t\t// Wrap menu\n\t\tthis.menuWrap = $( \"<div>\" ).append( this.menu );\n\t\tthis._addClass( this.menuWrap, \"ui-selectmenu-menu\", \"ui-front\" );\n\t\tthis.menuWrap.appendTo( this._appendTo() );\n\n\t\t// Initialize menu widget\n\t\tthis.menuInstance = this.menu\n\t\t\t.menu( {\n\t\t\t\tclasses: {\n\t\t\t\t\t\"ui-menu\": \"ui-corner-bottom\"\n\t\t\t\t},\n\t\t\t\trole: \"listbox\",\n\t\t\t\tselect: function( event, ui ) {\n\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t// Support: IE8\n\t\t\t\t\t// If the item was selected via a click, the text selection\n\t\t\t\t\t// will be destroyed in IE\n\t\t\t\t\tthat._setSelection();\n\n\t\t\t\t\tthat._select( ui.item.data( \"ui-selectmenu-item\" ), event );\n\t\t\t\t},\n\t\t\t\tfocus: function( event, ui ) {\n\t\t\t\t\tvar item = ui.item.data( \"ui-selectmenu-item\" );\n\n\t\t\t\t\t// Prevent inital focus from firing and check if its a newly focused item\n\t\t\t\t\tif ( that.focusIndex != null && item.index !== that.focusIndex ) {\n\t\t\t\t\t\tthat._trigger( \"focus\", event, { item: item } );\n\t\t\t\t\t\tif ( !that.isOpen ) {\n\t\t\t\t\t\t\tthat._select( item, event );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthat.focusIndex = item.index;\n\n\t\t\t\t\tthat.button.attr( \"aria-activedescendant\",\n\t\t\t\t\t\tthat.menuItems.eq( item.index ).attr( \"id\" ) );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.menu( \"instance\" );\n\n\t\t// Don't close the menu on mouseleave\n\t\tthis.menuInstance._off( this.menu, \"mouseleave\" );\n\n\t\t// Cancel the menu's collapseAll on document click\n\t\tthis.menuInstance._closeOnDocumentClick = function() {\n\t\t\treturn false;\n\t\t};\n\n\t\t// Selects often contain empty items, but never contain dividers\n\t\tthis.menuInstance._isDivider = function() {\n\t\t\treturn false;\n\t\t};\n\t},\n\n\trefresh: function() {\n\t\tthis._refreshMenu();\n\t\tthis.buttonItem.replaceWith(\n\t\t\tthis.buttonItem = this._renderButtonItem(\n\n\t\t\t\t// Fall back to an empty object in case there are no options\n\t\t\t\tthis._getSelectedItem().data( \"ui-selectmenu-item\" ) || {}\n\t\t\t)\n\t\t);\n\t\tif ( this.options.width === null ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_refreshMenu: function() {\n\t\tvar item,\n\t\t\toptions = this.element.find( \"option\" );\n\n\t\tthis.menu.empty();\n\n\t\tthis._parseOptions( options );\n\t\tthis._renderMenu( this.menu, this.items );\n\n\t\tthis.menuInstance.refresh();\n\t\tthis.menuItems = this.menu.find( \"li\" )\n\t\t\t.not( \".ui-selectmenu-optgroup\" )\n\t\t\t\t.find( \".ui-menu-item-wrapper\" );\n\n\t\tthis._rendered = true;\n\n\t\tif ( !options.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\titem = this._getSelectedItem();\n\n\t\t// Update the menu to have the correct item focused\n\t\tthis.menuInstance.focus( null, item );\n\t\tthis._setAria( item.data( \"ui-selectmenu-item\" ) );\n\n\t\t// Set disabled state\n\t\tthis._setOption( \"disabled\", this.element.prop( \"disabled\" ) );\n\t},\n\n\topen: function( event ) {\n\t\tif ( this.options.disabled ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If this is the first time the menu is being opened, render the items\n\t\tif ( !this._rendered ) {\n\t\t\tthis._refreshMenu();\n\t\t} else {\n\n\t\t\t// Menu clears focus on close, reset focus to selected item\n\t\t\tthis._removeClass( this.menu.find( \".ui-state-active\" ), null, \"ui-state-active\" );\n\t\t\tthis.menuInstance.focus( null, this._getSelectedItem() );\n\t\t}\n\n\t\t// If there are no options, don't open the menu\n\t\tif ( !this.menuItems.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = true;\n\t\tthis._toggleAttr();\n\t\tthis._resizeMenu();\n\t\tthis._position();\n\n\t\tthis._on( this.document, this._documentClick );\n\n\t\tthis._trigger( \"open\", event );\n\t},\n\n\t_position: function() {\n\t\tthis.menuWrap.position( $.extend( { of: this.button }, this.options.position ) );\n\t},\n\n\tclose: function( event ) {\n\t\tif ( !this.isOpen ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isOpen = false;\n\t\tthis._toggleAttr();\n\n\t\tthis.range = null;\n\t\tthis._off( this.document );\n\n\t\tthis._trigger( \"close\", event );\n\t},\n\n\twidget: function() {\n\t\treturn this.button;\n\t},\n\n\tmenuWidget: function() {\n\t\treturn this.menu;\n\t},\n\n\t_renderButtonItem: function( item ) {\n\t\tvar buttonItem = $( \"<span>\" );\n\n\t\tthis._setText( buttonItem, item.label );\n\t\tthis._addClass( buttonItem, \"ui-selectmenu-text\" );\n\n\t\treturn buttonItem;\n\t},\n\n\t_renderMenu: function( ul, items ) {\n\t\tvar that = this,\n\t\t\tcurrentOptgroup = \"\";\n\n\t\t$.each( items, function( index, item ) {\n\t\t\tvar li;\n\n\t\t\tif ( item.optgroup !== currentOptgroup ) {\n\t\t\t\tli = $( \"<li>\", {\n\t\t\t\t\ttext: item.optgroup\n\t\t\t\t} );\n\t\t\t\tthat._addClass( li, \"ui-selectmenu-optgroup\", \"ui-menu-divider\" +\n\t\t\t\t\t( item.element.parent( \"optgroup\" ).prop( \"disabled\" ) ?\n\t\t\t\t\t\t\" ui-state-disabled\" :\n\t\t\t\t\t\t\"\" ) );\n\n\t\t\t\tli.appendTo( ul );\n\n\t\t\t\tcurrentOptgroup = item.optgroup;\n\t\t\t}\n\n\t\t\tthat._renderItemData( ul, item );\n\t\t} );\n\t},\n\n\t_renderItemData: function( ul, item ) {\n\t\treturn this._renderItem( ul, item ).data( \"ui-selectmenu-item\", item );\n\t},\n\n\t_renderItem: function( ul, item ) {\n\t\tvar li = $( \"<li>\" ),\n\t\t\twrapper = $( \"<div>\", {\n\t\t\t\ttitle: item.element.attr( \"title\" )\n\t\t\t} );\n\n\t\tif ( item.disabled ) {\n\t\t\tthis._addClass( li, null, \"ui-state-disabled\" );\n\t\t}\n\t\tthis._setText( wrapper, item.label );\n\n\t\treturn li.append( wrapper ).appendTo( ul );\n\t},\n\n\t_setText: function( element, value ) {\n\t\tif ( value ) {\n\t\t\telement.text( value );\n\t\t} else {\n\t\t\telement.html( \"&#160;\" );\n\t\t}\n\t},\n\n\t_move: function( direction, event ) {\n\t\tvar item, next,\n\t\t\tfilter = \".ui-menu-item\";\n\n\t\tif ( this.isOpen ) {\n\t\t\titem = this.menuItems.eq( this.focusIndex ).parent( \"li\" );\n\t\t} else {\n\t\t\titem = this.menuItems.eq( this.element[ 0 ].selectedIndex ).parent( \"li\" );\n\t\t\tfilter += \":not(.ui-state-disabled)\";\n\t\t}\n\n\t\tif ( direction === \"first\" || direction === \"last\" ) {\n\t\t\tnext = item[ direction === \"first\" ? \"prevAll\" : \"nextAll\" ]( filter ).eq( -1 );\n\t\t} else {\n\t\t\tnext = item[ direction + \"All\" ]( filter ).eq( 0 );\n\t\t}\n\n\t\tif ( next.length ) {\n\t\t\tthis.menuInstance.focus( event, next );\n\t\t}\n\t},\n\n\t_getSelectedItem: function() {\n\t\treturn this.menuItems.eq( this.element[ 0 ].selectedIndex ).parent( \"li\" );\n\t},\n\n\t_toggle: function( event ) {\n\t\tthis[ this.isOpen ? \"close\" : \"open\" ]( event );\n\t},\n\n\t_setSelection: function() {\n\t\tvar selection;\n\n\t\tif ( !this.range ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( window.getSelection ) {\n\t\t\tselection = window.getSelection();\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange( this.range );\n\n\t\t// Support: IE8\n\t\t} else {\n\t\t\tthis.range.select();\n\t\t}\n\n\t\t// Support: IE\n\t\t// Setting the text selection kills the button focus in IE, but\n\t\t// restoring the focus doesn't kill the selection.\n\t\tthis.button.focus();\n\t},\n\n\t_documentClick: {\n\t\tmousedown: function( event ) {\n\t\t\tif ( !this.isOpen ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( !$( event.target ).closest( \".ui-selectmenu-menu, #\" +\n\t\t\t\t\t$.ui.escapeSelector( this.ids.button ) ).length ) {\n\t\t\t\tthis.close( event );\n\t\t\t}\n\t\t}\n\t},\n\n\t_buttonEvents: {\n\n\t\t// Prevent text selection from being reset when interacting with the selectmenu (#10144)\n\t\tmousedown: function() {\n\t\t\tvar selection;\n\n\t\t\tif ( window.getSelection ) {\n\t\t\t\tselection = window.getSelection();\n\t\t\t\tif ( selection.rangeCount ) {\n\t\t\t\t\tthis.range = selection.getRangeAt( 0 );\n\t\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t} else {\n\t\t\t\tthis.range = document.selection.createRange();\n\t\t\t}\n\t\t},\n\n\t\tclick: function( event ) {\n\t\t\tthis._setSelection();\n\t\t\tthis._toggle( event );\n\t\t},\n\n\t\tkeydown: function( event ) {\n\t\t\tvar preventDefault = true;\n\t\t\tswitch ( event.keyCode ) {\n\t\t\tcase $.ui.keyCode.TAB:\n\t\t\tcase $.ui.keyCode.ESCAPE:\n\t\t\t\tthis.close( event );\n\t\t\t\tpreventDefault = false;\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.ENTER:\n\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.UP:\n\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\tthis._toggle( event );\n\t\t\t\t} else {\n\t\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.DOWN:\n\t\t\t\tif ( event.altKey ) {\n\t\t\t\t\tthis._toggle( event );\n\t\t\t\t} else {\n\t\t\t\t\tthis._move( \"next\", event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.SPACE:\n\t\t\t\tif ( this.isOpen ) {\n\t\t\t\t\tthis._selectFocusedItem( event );\n\t\t\t\t} else {\n\t\t\t\t\tthis._toggle( event );\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.LEFT:\n\t\t\t\tthis._move( \"prev\", event );\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.RIGHT:\n\t\t\t\tthis._move( \"next\", event );\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.HOME:\n\t\t\tcase $.ui.keyCode.PAGE_UP:\n\t\t\t\tthis._move( \"first\", event );\n\t\t\t\tbreak;\n\t\t\tcase $.ui.keyCode.END:\n\t\t\tcase $.ui.keyCode.PAGE_DOWN:\n\t\t\t\tthis._move( \"last\", event );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthis.menu.trigger( event );\n\t\t\t\tpreventDefault = false;\n\t\t\t}\n\n\t\t\tif ( preventDefault ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t}\n\t},\n\n\t_selectFocusedItem: function( event ) {\n\t\tvar item = this.menuItems.eq( this.focusIndex ).parent( \"li\" );\n\t\tif ( !item.hasClass( \"ui-state-disabled\" ) ) {\n\t\t\tthis._select( item.data( \"ui-selectmenu-item\" ), event );\n\t\t}\n\t},\n\n\t_select: function( item, event ) {\n\t\tvar oldIndex = this.element[ 0 ].selectedIndex;\n\n\t\t// Change native select element\n\t\tthis.element[ 0 ].selectedIndex = item.index;\n\t\tthis.buttonItem.replaceWith( this.buttonItem = this._renderButtonItem( item ) );\n\t\tthis._setAria( item );\n\t\tthis._trigger( \"select\", event, { item: item } );\n\n\t\tif ( item.index !== oldIndex ) {\n\t\t\tthis._trigger( \"change\", event, { item: item } );\n\t\t}\n\n\t\tthis.close( event );\n\t},\n\n\t_setAria: function( item ) {\n\t\tvar id = this.menuItems.eq( item.index ).attr( \"id\" );\n\n\t\tthis.button.attr( {\n\t\t\t\"aria-labelledby\": id,\n\t\t\t\"aria-activedescendant\": id\n\t\t} );\n\t\tthis.menu.attr( \"aria-activedescendant\", id );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tif ( key === \"icons\" ) {\n\t\t\tvar icon = this.button.find( \"span.ui-icon\" );\n\t\t\tthis._removeClass( icon, null, this.options.icons.button )\n\t\t\t\t._addClass( icon, null, value.button );\n\t\t}\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"appendTo\" ) {\n\t\t\tthis.menuWrap.appendTo( this._appendTo() );\n\t\t}\n\n\t\tif ( key === \"width\" ) {\n\t\t\tthis._resizeButton();\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis._super( value );\n\n\t\tthis.menuInstance.option( \"disabled\", value );\n\t\tthis.button.attr( \"aria-disabled\", value );\n\t\tthis._toggleClass( this.button, null, \"ui-state-disabled\", value );\n\n\t\tthis.element.prop( \"disabled\", value );\n\t\tif ( value ) {\n\t\t\tthis.button.attr( \"tabindex\", -1 );\n\t\t\tthis.close();\n\t\t} else {\n\t\t\tthis.button.attr( \"tabindex\", 0 );\n\t\t}\n\t},\n\n\t_appendTo: function() {\n\t\tvar element = this.options.appendTo;\n\n\t\tif ( element ) {\n\t\t\telement = element.jquery || element.nodeType ?\n\t\t\t\t$( element ) :\n\t\t\t\tthis.document.find( element ).eq( 0 );\n\t\t}\n\n\t\tif ( !element || !element[ 0 ] ) {\n\t\t\telement = this.element.closest( \".ui-front, dialog\" );\n\t\t}\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_toggleAttr: function() {\n\t\tthis.button.attr( \"aria-expanded\", this.isOpen );\n\n\t\t// We can't use two _toggleClass() calls here, because we need to make sure\n\t\t// we always remove classes first and add them second, otherwise if both classes have the\n\t\t// same theme class, it will be removed after we add it.\n\t\tthis._removeClass( this.button, \"ui-selectmenu-button-\" +\n\t\t\t( this.isOpen ? \"closed\" : \"open\" ) )\n\t\t\t._addClass( this.button, \"ui-selectmenu-button-\" +\n\t\t\t\t( this.isOpen ? \"open\" : \"closed\" ) )\n\t\t\t._toggleClass( this.menuWrap, \"ui-selectmenu-open\", null, this.isOpen );\n\n\t\tthis.menu.attr( \"aria-hidden\", !this.isOpen );\n\t},\n\n\t_resizeButton: function() {\n\t\tvar width = this.options.width;\n\n\t\t// For `width: false`, just remove inline style and stop\n\t\tif ( width === false ) {\n\t\t\tthis.button.css( \"width\", \"\" );\n\t\t\treturn;\n\t\t}\n\n\t\t// For `width: null`, match the width of the original element\n\t\tif ( width === null ) {\n\t\t\twidth = this.element.show().outerWidth();\n\t\t\tthis.element.hide();\n\t\t}\n\n\t\tthis.button.outerWidth( width );\n\t},\n\n\t_resizeMenu: function() {\n\t\tthis.menu.outerWidth( Math.max(\n\t\t\tthis.button.outerWidth(),\n\n\t\t\t// Support: IE10\n\t\t\t// IE10 wraps long text (possibly a rounding bug)\n\t\t\t// so we add 1px to avoid the wrapping\n\t\t\tthis.menu.width( \"\" ).outerWidth() + 1\n\t\t) );\n\t},\n\n\t_getCreateOptions: function() {\n\t\tvar options = this._super();\n\n\t\toptions.disabled = this.element.prop( \"disabled\" );\n\n\t\treturn options;\n\t},\n\n\t_parseOptions: function( options ) {\n\t\tvar that = this,\n\t\t\tdata = [];\n\t\toptions.each( function( index, item ) {\n\t\t\tif ( item.hidden ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdata.push( that._parseOption( $( item ), index ) );\n\t\t} );\n\t\tthis.items = data;\n\t},\n\n\t_parseOption: function( option, index ) {\n\t\tvar optgroup = option.parent( \"optgroup\" );\n\n\t\treturn {\n\t\t\telement: option,\n\t\t\tindex: index,\n\t\t\tvalue: option.val(),\n\t\t\tlabel: option.text(),\n\t\t\toptgroup: optgroup.attr( \"label\" ) || \"\",\n\t\t\tdisabled: optgroup.prop( \"disabled\" ) || option.prop( \"disabled\" )\n\t\t};\n\t},\n\n\t_destroy: function() {\n\t\tthis._unbindFormResetHandler();\n\t\tthis.menuWrap.remove();\n\t\tthis.button.remove();\n\t\tthis.element.show();\n\t\tthis.element.removeUniqueId();\n\t\tthis.labels.attr( \"for\", this.ids.element );\n\t}\n} ] );\n\n});\n"]}