{"version":3,"sources":["widgets/controlgroup.js"],"names":["define","$","controlgroupCornerRegex","widget","version","defaultElement","options","direction","disabled","onlyVisible","items","button","controlgroupLabel","checkboxradio","selectmenu","spinner","_create","this","_enhance","element","attr","refresh","_destroy","_callChildMethod","childWidgets","removeData","removeAttr","find","contents","unwrap","_initWidgets","that","each","selector","labels","children","length","wrapAll","_addClass","concat","get","fn","classes","instance","instanceOptions","extend","parent","_resolveClassesValues","widgetElement","data","push","uniqueSort","method","_updateCornerClass","position","remove","add","_buildSimpleOptions","label","_removeClass","key","result","middle","first","last","only","_spinnerOptions","_buttonOptions","_checkboxradioOptions","_selectmenuOptions","width","ui-selectmenu-button-open","ui-selectmenu-button-closed","current","trim","replace","_setOption","value","_super","filter","index","widgetName"],"mappings":"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","file":"../../widgets/controlgroup.js","sourcesContent":["/*!\r\n * jQuery UI Controlgroup @VERSION\r\n * http://jqueryui.com\r\n *\r\n * Copyright jQuery Foundation and other contributors\r\n * Released under the MIT license.\r\n * http://jquery.org/license\r\n */\r\n\r\n//>>label: Controlgroup\r\n//>>group: Widgets\r\n//>>description: Visually groups form control widgets\r\n//>>docs: http://api.jqueryui.com/controlgroup/\r\n//>>demos: http://jqueryui.com/controlgroup/\r\n//>>css.structure: ../../themes/base/core.css\r\n//>>css.structure: ../../themes/base/controlgroup.css\r\n//>>css.theme: ../../themes/base/theme.css\r\n\r\ndefine( [\r\n\t\"skylark-jquery\",\r\n\t\"../widget\"\r\n],function( $ ) {\r\nvar controlgroupCornerRegex = /ui-corner-([a-z]){2,6}/g;\r\n\r\nreturn $.widget( \"ui.controlgroup\", {\r\n\tversion: \"@VERSION\",\r\n\tdefaultElement: \"<div>\",\r\n\toptions: {\r\n\t\tdirection: \"horizontal\",\r\n\t\tdisabled: null,\r\n\t\tonlyVisible: true,\r\n\t\titems: {\r\n\t\t\t\"button\": \"input[type=button], input[type=submit], input[type=reset], button, a\",\r\n\t\t\t\"controlgroupLabel\": \".ui-controlgroup-label\",\r\n\t\t\t\"checkboxradio\": \"input[type='checkbox'], input[type='radio']\",\r\n\t\t\t\"selectmenu\": \"select\",\r\n\t\t\t\"spinner\": \".ui-spinner-input\"\r\n\t\t}\r\n\t},\r\n\r\n\t_create: function() {\r\n\t\tthis._enhance();\r\n\t},\r\n\r\n\t// To support the enhanced option in jQuery Mobile, we isolate DOM manipulation\r\n\t_enhance: function() {\r\n\t\tthis.element.attr( \"role\", \"toolbar\" );\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\t_destroy: function() {\r\n\t\tthis._callChildMethod( \"destroy\" );\r\n\t\tthis.childWidgets.removeData( \"ui-controlgroup-data\" );\r\n\t\tthis.element.removeAttr( \"role\" );\r\n\t\tif ( this.options.items.controlgroupLabel ) {\r\n\t\t\tthis.element\r\n\t\t\t\t.find( this.options.items.controlgroupLabel )\r\n\t\t\t\t.find( \".ui-controlgroup-label-contents\" )\r\n\t\t\t\t.contents().unwrap();\r\n\t\t}\r\n\t},\r\n\r\n\t_initWidgets: function() {\r\n\t\tvar that = this,\r\n\t\t\tchildWidgets = [];\r\n\r\n\t\t// First we iterate over each of the items options\r\n\t\t$.each( this.options.items, function( widget, selector ) {\r\n\t\t\tvar labels;\r\n\t\t\tvar options = {};\r\n\r\n\t\t\t// Make sure the widget has a selector set\r\n\t\t\tif ( !selector ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif ( widget === \"controlgroupLabel\" ) {\r\n\t\t\t\tlabels = that.element.find( selector );\r\n\t\t\t\tlabels.each( function() {\r\n\t\t\t\t\tvar element = $( this );\r\n\r\n\t\t\t\t\tif ( element.children( \".ui-controlgroup-label-contents\" ).length ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telement.contents()\r\n\t\t\t\t\t\t.wrapAll( \"<span class='ui-controlgroup-label-contents'></span>\" );\r\n\t\t\t\t} );\r\n\t\t\t\tthat._addClass( labels, null, \"ui-widget ui-widget-content ui-state-default\" );\r\n\t\t\t\tchildWidgets = childWidgets.concat( labels.get() );\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Make sure the widget actually exists\r\n\t\t\tif ( !$.fn[ widget ] ) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// We assume everything is in the middle to start because we can't determine\r\n\t\t\t// first / last elements until all enhancments are done.\r\n\t\t\tif ( that[ \"_\" + widget + \"Options\" ] ) {\r\n\t\t\t\toptions = that[ \"_\" + widget + \"Options\" ]( \"middle\" );\r\n\t\t\t} else {\r\n\t\t\t\toptions = { classes: {} };\r\n\t\t\t}\r\n\r\n\t\t\t// Find instances of this widget inside controlgroup and init them\r\n\t\t\tthat.element\r\n\t\t\t\t.find( selector )\r\n\t\t\t\t.each( function() {\r\n\t\t\t\t\tvar element = $( this );\r\n\t\t\t\t\tvar instance = element[ widget ]( \"instance\" );\r\n\r\n\t\t\t\t\t// We need to clone the default options for this type of widget to avoid\r\n\t\t\t\t\t// polluting the variable options which has a wider scope than a single widget.\r\n\t\t\t\t\tvar instanceOptions = $.widget.extend( {}, options );\r\n\r\n\t\t\t\t\t// If the button is the child of a spinner ignore it\r\n\t\t\t\t\t// TODO: Find a more generic solution\r\n\t\t\t\t\tif ( widget === \"button\" && element.parent( \".ui-spinner\" ).length ) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Create the widget if it doesn't exist\r\n\t\t\t\t\tif ( !instance ) {\r\n\t\t\t\t\t\tinstance = element[ widget ]()[ widget ]( \"instance\" );\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( instance ) {\r\n\t\t\t\t\t\tinstanceOptions.classes =\r\n\t\t\t\t\t\t\tthat._resolveClassesValues( instanceOptions.classes, instance );\r\n\t\t\t\t\t}\r\n\t\t\t\t\telement[ widget ]( instanceOptions );\r\n\r\n\t\t\t\t\t// Store an instance of the controlgroup to be able to reference\r\n\t\t\t\t\t// from the outermost element for changing options and refresh\r\n\t\t\t\t\tvar widgetElement = element[ widget ]( \"widget\" );\r\n\t\t\t\t\t$.data( widgetElement[ 0 ], \"ui-controlgroup-data\",\r\n\t\t\t\t\t\tinstance ? instance : element[ widget ]( \"instance\" ) );\r\n\r\n\t\t\t\t\tchildWidgets.push( widgetElement[ 0 ] );\r\n\t\t\t\t} );\r\n\t\t} );\r\n\r\n\t\tthis.childWidgets = $( $.uniqueSort( childWidgets ) );\r\n\t\tthis._addClass( this.childWidgets, \"ui-controlgroup-item\" );\r\n\t},\r\n\r\n\t_callChildMethod: function( method ) {\r\n\t\tthis.childWidgets.each( function() {\r\n\t\t\tvar element = $( this ),\r\n\t\t\t\tdata = element.data( \"ui-controlgroup-data\" );\r\n\t\t\tif ( data && data[ method ] ) {\r\n\t\t\t\tdata[ method ]();\r\n\t\t\t}\r\n\t\t} );\r\n\t},\r\n\r\n\t_updateCornerClass: function( element, position ) {\r\n\t\tvar remove = \"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all\";\r\n\t\tvar add = this._buildSimpleOptions( position, \"label\" ).classes.label;\r\n\r\n\t\tthis._removeClass( element, null, remove );\r\n\t\tthis._addClass( element, null, add );\r\n\t},\r\n\r\n\t_buildSimpleOptions: function( position, key ) {\r\n\t\tvar direction = this.options.direction === \"vertical\";\r\n\t\tvar result = {\r\n\t\t\tclasses: {}\r\n\t\t};\r\n\t\tresult.classes[ key ] = {\r\n\t\t\t\"middle\": \"\",\r\n\t\t\t\"first\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" ),\r\n\t\t\t\"last\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" ),\r\n\t\t\t\"only\": \"ui-corner-all\"\r\n\t\t}[ position ];\r\n\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_spinnerOptions: function( position ) {\r\n\t\tvar options = this._buildSimpleOptions( position, \"ui-spinner\" );\r\n\r\n\t\toptions.classes[ \"ui-spinner-up\" ] = \"\";\r\n\t\toptions.classes[ \"ui-spinner-down\" ] = \"\";\r\n\r\n\t\treturn options;\r\n\t},\r\n\r\n\t_buttonOptions: function( position ) {\r\n\t\treturn this._buildSimpleOptions( position, \"ui-button\" );\r\n\t},\r\n\r\n\t_checkboxradioOptions: function( position ) {\r\n\t\treturn this._buildSimpleOptions( position, \"ui-checkboxradio-label\" );\r\n\t},\r\n\r\n\t_selectmenuOptions: function( position ) {\r\n\t\tvar direction = this.options.direction === \"vertical\";\r\n\t\treturn {\r\n\t\t\twidth: direction ? \"auto\" : false,\r\n\t\t\tclasses: {\r\n\t\t\t\tmiddle: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"\",\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"\"\r\n\t\t\t\t},\r\n\t\t\t\tfirst: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-\" + ( direction ? \"top\" : \"tl\" ),\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"top\" : \"left\" )\r\n\t\t\t\t},\r\n\t\t\t\tlast: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": direction ? \"\" : \"ui-corner-tr\",\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-\" + ( direction ? \"bottom\" : \"right\" )\r\n\t\t\t\t},\r\n\t\t\t\tonly: {\r\n\t\t\t\t\t\"ui-selectmenu-button-open\": \"ui-corner-top\",\r\n\t\t\t\t\t\"ui-selectmenu-button-closed\": \"ui-corner-all\"\r\n\t\t\t\t}\r\n\r\n\t\t\t}[ position ]\r\n\t\t};\r\n\t},\r\n\r\n\t_resolveClassesValues: function( classes, instance ) {\r\n\t\tvar result = {};\r\n\t\t$.each( classes, function( key ) {\r\n\t\t\tvar current = instance.options.classes[ key ] || \"\";\r\n\t\t\tcurrent = $.trim( current.replace( controlgroupCornerRegex, \"\" ) );\r\n\t\t\tresult[ key ] = ( current + \" \" + classes[ key ] ).replace( /\\s+/g, \" \" );\r\n\t\t} );\r\n\t\treturn result;\r\n\t},\r\n\r\n\t_setOption: function( key, value ) {\r\n\t\tif ( key === \"direction\" ) {\r\n\t\t\tthis._removeClass( \"ui-controlgroup-\" + this.options.direction );\r\n\t\t}\r\n\r\n\t\tthis._super( key, value );\r\n\t\tif ( key === \"disabled\" ) {\r\n\t\t\tthis._callChildMethod( value ? \"disable\" : \"enable\" );\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.refresh();\r\n\t},\r\n\r\n\trefresh: function() {\r\n\t\tvar children,\r\n\t\t\tthat = this;\r\n\r\n\t\tthis._addClass( \"ui-controlgroup ui-controlgroup-\" + this.options.direction );\r\n\r\n\t\tif ( this.options.direction === \"horizontal\" ) {\r\n\t\t\tthis._addClass( null, \"ui-helper-clearfix\" );\r\n\t\t}\r\n\t\tthis._initWidgets();\r\n\r\n\t\tchildren = this.childWidgets;\r\n\r\n\t\t// We filter here because we need to track all childWidgets not just the visible ones\r\n\t\tif ( this.options.onlyVisible ) {\r\n\t\t\tchildren = children.filter( \":visible\" );\r\n\t\t}\r\n\r\n\t\tif ( children.length ) {\r\n\r\n\t\t\t// We do this last because we need to make sure all enhancment is done\r\n\t\t\t// before determining first and last\r\n\t\t\t$.each( [ \"first\", \"last\" ], function( index, value ) {\r\n\t\t\t\tvar instance = children[ value ]().data( \"ui-controlgroup-data\" );\r\n\r\n\t\t\t\tif ( instance && that[ \"_\" + instance.widgetName + \"Options\" ] ) {\r\n\t\t\t\t\tvar options = that[ \"_\" + instance.widgetName + \"Options\" ](\r\n\t\t\t\t\t\tchildren.length === 1 ? \"only\" : value\r\n\t\t\t\t\t);\r\n\t\t\t\t\toptions.classes = that._resolveClassesValues( options.classes, instance );\r\n\t\t\t\t\tinstance.element[ instance.widgetName ]( options );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat._updateCornerClass( children[ value ](), value );\r\n\t\t\t\t}\r\n\t\t\t} );\r\n\r\n\t\t\t// Finally call the refresh method on each of the child widgets.\r\n\t\t\tthis._callChildMethod( \"refresh\" );\r\n\t\t}\r\n\t}\r\n} );\r\n});\r\n"]}