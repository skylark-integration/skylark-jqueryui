{"version":3,"sources":["widgets/tooltip.js"],"names":["define","$","widget","version","options","classes","ui-tooltip","content","title","this","attr","text","html","hide","items","position","my","at","collision","show","track","close","open","_addDescribedBy","elem","id","describedby","split","push","data","trim","join","_removeDescribedBy","index","inArray","splice","removeData","removeAttr","_create","_on","mouseover","focusin","tooltips","parents","liveRegion","role","aria-live","aria-relevant","appendTo","document","body","_addClass","disabledTitles","_setOption","key","value","that","_super","each","tooltipData","_updateContent","element","_setOptionDisabled","_disable","event","Event","target","currentTarget","add","find","addBack","filter","is","_enable","closest","length","type","blurEvent","parent","uniqueId","_registerCloseHandlers","contentOption","eventType","nodeType","jquery","_open","call","response","_delay","positionOption","of","tooltip","delayedShow","a11yContent","extend","_find","_tooltip","children","test","mousemove","_show","delay","setInterval","clearInterval","fx","interval","_trigger","events","keyup","keyCode","ui","ESCAPE","fakeEvent","remove","_removeTooltip","mouseleave","focusout","closing","hiding","stop","_hide","_off","_appendTo","_destroy","uiBackCompat","tooltipClass","_superApply","arguments","addClass"],"mappings":"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","file":"../../widgets/tooltip.js","sourcesContent":["/*!\n * jQuery UI Tooltip @VERSION\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n\n//>>label: Tooltip\n//>>group: Widgets\n//>>description: Shows additional information for any element on hover or focus.\n//>>docs: http://api.jqueryui.com/tooltip/\n//>>demos: http://jqueryui.com/tooltip/\n//>>css.structure: ../../themes/base/core.css\n//>>css.structure: ../../themes/base/tooltip.css\n//>>css.theme: ../../themes/base/theme.css\n\ndefine( [\n\t\t\t\"skylark-jquery\",\n\t\t\t\"../keycode\",\n\t\t\t\"../position\",\n\t\t\t\"../unique-id\",\n\t\t\t\"../version\",\n\t\t\t\"../widget\"\n],function( $ ) {\n\n$.widget( \"ui.tooltip\", {\n\tversion: \"@VERSION\",\n\toptions: {\n\t\tclasses: {\n\t\t\t\"ui-tooltip\": \"ui-corner-all ui-widget-shadow\"\n\t\t},\n\t\tcontent: function() {\n\n\t\t\t// support: IE<9, Opera in jQuery <1.7\n\t\t\t// .text() can't accept undefined, so coerce to a string\n\t\t\tvar title = $( this ).attr( \"title\" ) || \"\";\n\n\t\t\t// Escape title, since we're going from an attribute to raw HTML\n\t\t\treturn $( \"<a>\" ).text( title ).html();\n\t\t},\n\t\thide: true,\n\n\t\t// Disabled elements have inconsistent behavior across browsers (#8661)\n\t\titems: \"[title]:not([disabled])\",\n\t\tposition: {\n\t\t\tmy: \"left top+15\",\n\t\t\tat: \"left bottom\",\n\t\t\tcollision: \"flipfit flip\"\n\t\t},\n\t\tshow: true,\n\t\ttrack: false,\n\n\t\t// Callbacks\n\t\tclose: null,\n\t\topen: null\n\t},\n\n\t_addDescribedBy: function( elem, id ) {\n\t\tvar describedby = ( elem.attr( \"aria-describedby\" ) || \"\" ).split( /\\s+/ );\n\t\tdescribedby.push( id );\n\t\telem\n\t\t\t.data( \"ui-tooltip-id\", id )\n\t\t\t.attr( \"aria-describedby\", $.trim( describedby.join( \" \" ) ) );\n\t},\n\n\t_removeDescribedBy: function( elem ) {\n\t\tvar id = elem.data( \"ui-tooltip-id\" ),\n\t\t\tdescribedby = ( elem.attr( \"aria-describedby\" ) || \"\" ).split( /\\s+/ ),\n\t\t\tindex = $.inArray( id, describedby );\n\n\t\tif ( index !== -1 ) {\n\t\t\tdescribedby.splice( index, 1 );\n\t\t}\n\n\t\telem.removeData( \"ui-tooltip-id\" );\n\t\tdescribedby = $.trim( describedby.join( \" \" ) );\n\t\tif ( describedby ) {\n\t\t\telem.attr( \"aria-describedby\", describedby );\n\t\t} else {\n\t\t\telem.removeAttr( \"aria-describedby\" );\n\t\t}\n\t},\n\n\t_create: function() {\n\t\tthis._on( {\n\t\t\tmouseover: \"open\",\n\t\t\tfocusin: \"open\"\n\t\t} );\n\n\t\t// IDs of generated tooltips, needed for destroy\n\t\tthis.tooltips = {};\n\n\t\t// IDs of parent tooltips where we removed the title attribute\n\t\tthis.parents = {};\n\n\t\t// Append the aria-live region so tooltips announce correctly\n\t\tthis.liveRegion = $( \"<div>\" )\n\t\t\t.attr( {\n\t\t\t\trole: \"log\",\n\t\t\t\t\"aria-live\": \"assertive\",\n\t\t\t\t\"aria-relevant\": \"additions\"\n\t\t\t} )\n\t\t\t.appendTo( this.document[ 0 ].body );\n\t\tthis._addClass( this.liveRegion, null, \"ui-helper-hidden-accessible\" );\n\n\t\tthis.disabledTitles = $( [] );\n\t},\n\n\t_setOption: function( key, value ) {\n\t\tvar that = this;\n\n\t\tthis._super( key, value );\n\n\t\tif ( key === \"content\" ) {\n\t\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\t\tthat._updateContent( tooltipData.element );\n\t\t\t} );\n\t\t}\n\t},\n\n\t_setOptionDisabled: function( value ) {\n\t\tthis[ value ? \"_disable\" : \"_enable\" ]();\n\t},\n\n\t_disable: function() {\n\t\tvar that = this;\n\n\t\t// Close open tooltips\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\t\t\tvar event = $.Event( \"blur\" );\n\t\t\tevent.target = event.currentTarget = tooltipData.element[ 0 ];\n\t\t\tthat.close( event, true );\n\t\t} );\n\n\t\t// Remove title attributes to prevent native tooltips\n\t\tthis.disabledTitles = this.disabledTitles.add(\n\t\t\tthis.element.find( this.options.items ).addBack()\n\t\t\t\t.filter( function() {\n\t\t\t\t\tvar element = $( this );\n\t\t\t\t\tif ( element.is( \"[title]\" ) ) {\n\t\t\t\t\t\treturn element\n\t\t\t\t\t\t\t.data( \"ui-tooltip-title\", element.attr( \"title\" ) )\n\t\t\t\t\t\t\t.removeAttr( \"title\" );\n\t\t\t\t\t}\n\t\t\t\t} )\n\t\t);\n\t},\n\n\t_enable: function() {\n\n\t\t// restore title attributes\n\t\tthis.disabledTitles.each( function() {\n\t\t\tvar element = $( this );\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\n\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\n\t\t\t}\n\t\t} );\n\t\tthis.disabledTitles = $( [] );\n\t},\n\n\topen: function( event ) {\n\t\tvar that = this,\n\t\t\ttarget = $( event ? event.target : this.element )\n\n\t\t\t\t// we need closest here due to mouseover bubbling,\n\t\t\t\t// but always pointing at the same event target\n\t\t\t\t.closest( this.options.items );\n\n\t\t// No element to show a tooltip for or the tooltip is already open\n\t\tif ( !target.length || target.data( \"ui-tooltip-id\" ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( target.attr( \"title\" ) ) {\n\t\t\ttarget.data( \"ui-tooltip-title\", target.attr( \"title\" ) );\n\t\t}\n\n\t\ttarget.data( \"ui-tooltip-open\", true );\n\n\t\t// Kill parent tooltips, custom or native, for hover\n\t\tif ( event && event.type === \"mouseover\" ) {\n\t\t\ttarget.parents().each( function() {\n\t\t\t\tvar parent = $( this ),\n\t\t\t\t\tblurEvent;\n\t\t\t\tif ( parent.data( \"ui-tooltip-open\" ) ) {\n\t\t\t\t\tblurEvent = $.Event( \"blur\" );\n\t\t\t\t\tblurEvent.target = blurEvent.currentTarget = this;\n\t\t\t\t\tthat.close( blurEvent, true );\n\t\t\t\t}\n\t\t\t\tif ( parent.attr( \"title\" ) ) {\n\t\t\t\t\tparent.uniqueId();\n\t\t\t\t\tthat.parents[ this.id ] = {\n\t\t\t\t\t\telement: this,\n\t\t\t\t\t\ttitle: parent.attr( \"title\" )\n\t\t\t\t\t};\n\t\t\t\t\tparent.attr( \"title\", \"\" );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tthis._registerCloseHandlers( event, target );\n\t\tthis._updateContent( target, event );\n\t},\n\n\t_updateContent: function( target, event ) {\n\t\tvar content,\n\t\t\tcontentOption = this.options.content,\n\t\t\tthat = this,\n\t\t\teventType = event ? event.type : null;\n\n\t\tif ( typeof contentOption === \"string\" || contentOption.nodeType ||\n\t\t\t\tcontentOption.jquery ) {\n\t\t\treturn this._open( event, target, contentOption );\n\t\t}\n\n\t\tcontent = contentOption.call( target[ 0 ], function( response ) {\n\n\t\t\t// IE may instantly serve a cached response for ajax requests\n\t\t\t// delay this call to _open so the other call to _open runs first\n\t\t\tthat._delay( function() {\n\n\t\t\t\t// Ignore async response if tooltip was closed already\n\t\t\t\tif ( !target.data( \"ui-tooltip-open\" ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// JQuery creates a special event for focusin when it doesn't\n\t\t\t\t// exist natively. To improve performance, the native event\n\t\t\t\t// object is reused and the type is changed. Therefore, we can't\n\t\t\t\t// rely on the type being correct after the event finished\n\t\t\t\t// bubbling, so we set it back to the previous value. (#8740)\n\t\t\t\tif ( event ) {\n\t\t\t\t\tevent.type = eventType;\n\t\t\t\t}\n\t\t\t\tthis._open( event, target, response );\n\t\t\t} );\n\t\t} );\n\t\tif ( content ) {\n\t\t\tthis._open( event, target, content );\n\t\t}\n\t},\n\n\t_open: function( event, target, content ) {\n\t\tvar tooltipData, tooltip, delayedShow, a11yContent,\n\t\t\tpositionOption = $.extend( {}, this.options.position );\n\n\t\tif ( !content ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Content can be updated multiple times. If the tooltip already\n\t\t// exists, then just update the content and bail.\n\t\ttooltipData = this._find( target );\n\t\tif ( tooltipData ) {\n\t\t\ttooltipData.tooltip.find( \".ui-tooltip-content\" ).html( content );\n\t\t\treturn;\n\t\t}\n\n\t\t// If we have a title, clear it to prevent the native tooltip\n\t\t// we have to check first to avoid defining a title if none exists\n\t\t// (we don't want to cause an element to start matching [title])\n\t\t//\n\t\t// We use removeAttr only for key events, to allow IE to export the correct\n\t\t// accessible attributes. For mouse events, set to empty string to avoid\n\t\t// native tooltip showing up (happens only when removing inside mouseover).\n\t\tif ( target.is( \"[title]\" ) ) {\n\t\t\tif ( event && event.type === \"mouseover\" ) {\n\t\t\t\ttarget.attr( \"title\", \"\" );\n\t\t\t} else {\n\t\t\t\ttarget.removeAttr( \"title\" );\n\t\t\t}\n\t\t}\n\n\t\ttooltipData = this._tooltip( target );\n\t\ttooltip = tooltipData.tooltip;\n\t\tthis._addDescribedBy( target, tooltip.attr( \"id\" ) );\n\t\ttooltip.find( \".ui-tooltip-content\" ).html( content );\n\n\t\t// Support: Voiceover on OS X, JAWS on IE <= 9\n\t\t// JAWS announces deletions even when aria-relevant=\"additions\"\n\t\t// Voiceover will sometimes re-read the entire log region's contents from the beginning\n\t\tthis.liveRegion.children().hide();\n\t\ta11yContent = $( \"<div>\" ).html( tooltip.find( \".ui-tooltip-content\" ).html() );\n\t\ta11yContent.removeAttr( \"name\" ).find( \"[name]\" ).removeAttr( \"name\" );\n\t\ta11yContent.removeAttr( \"id\" ).find( \"[id]\" ).removeAttr( \"id\" );\n\t\ta11yContent.appendTo( this.liveRegion );\n\n\t\tfunction position( event ) {\n\t\t\tpositionOption.of = event;\n\t\t\tif ( tooltip.is( \":hidden\" ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttooltip.position( positionOption );\n\t\t}\n\t\tif ( this.options.track && event && /^mouse/.test( event.type ) ) {\n\t\t\tthis._on( this.document, {\n\t\t\t\tmousemove: position\n\t\t\t} );\n\n\t\t\t// trigger once to override element-relative positioning\n\t\t\tposition( event );\n\t\t} else {\n\t\t\ttooltip.position( $.extend( {\n\t\t\t\tof: target\n\t\t\t}, this.options.position ) );\n\t\t}\n\n\t\ttooltip.hide();\n\n\t\tthis._show( tooltip, this.options.show );\n\n\t\t// Handle tracking tooltips that are shown with a delay (#8644). As soon\n\t\t// as the tooltip is visible, position the tooltip using the most recent\n\t\t// event.\n\t\t// Adds the check to add the timers only when both delay and track options are set (#14682)\n\t\tif ( this.options.track && this.options.show && this.options.show.delay ) {\n\t\t\tdelayedShow = this.delayedShow = setInterval( function() {\n\t\t\t\tif ( tooltip.is( \":visible\" ) ) {\n\t\t\t\t\tposition( positionOption.of );\n\t\t\t\t\tclearInterval( delayedShow );\n\t\t\t\t}\n\t\t\t}, $.fx.interval );\n\t\t}\n\n\t\tthis._trigger( \"open\", event, { tooltip: tooltip } );\n\t},\n\n\t_registerCloseHandlers: function( event, target ) {\n\t\tvar events = {\n\t\t\tkeyup: function( event ) {\n\t\t\t\tif ( event.keyCode === $.ui.keyCode.ESCAPE ) {\n\t\t\t\t\tvar fakeEvent = $.Event( event );\n\t\t\t\t\tfakeEvent.currentTarget = target[ 0 ];\n\t\t\t\t\tthis.close( fakeEvent, true );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Only bind remove handler for delegated targets. Non-delegated\n\t\t// tooltips will handle this in destroy.\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tevents.remove = function() {\n\t\t\t\tthis._removeTooltip( this._find( target ).tooltip );\n\t\t\t};\n\t\t}\n\n\t\tif ( !event || event.type === \"mouseover\" ) {\n\t\t\tevents.mouseleave = \"close\";\n\t\t}\n\t\tif ( !event || event.type === \"focusin\" ) {\n\t\t\tevents.focusout = \"close\";\n\t\t}\n\t\tthis._on( true, target, events );\n\t},\n\n\tclose: function( event ) {\n\t\tvar tooltip,\n\t\t\tthat = this,\n\t\t\ttarget = $( event ? event.currentTarget : this.element ),\n\t\t\ttooltipData = this._find( target );\n\n\t\t// The tooltip may already be closed\n\t\tif ( !tooltipData ) {\n\n\t\t\t// We set ui-tooltip-open immediately upon open (in open()), but only set the\n\t\t\t// additional data once there's actually content to show (in _open()). So even if the\n\t\t\t// tooltip doesn't have full data, we always remove ui-tooltip-open in case we're in\n\t\t\t// the period between open() and _open().\n\t\t\ttarget.removeData( \"ui-tooltip-open\" );\n\t\t\treturn;\n\t\t}\n\n\t\ttooltip = tooltipData.tooltip;\n\n\t\t// Disabling closes the tooltip, so we need to track when we're closing\n\t\t// to avoid an infinite loop in case the tooltip becomes disabled on close\n\t\tif ( tooltipData.closing ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Clear the interval for delayed tracking tooltips\n\t\tclearInterval( this.delayedShow );\n\n\t\t// Only set title if we had one before (see comment in _open())\n\t\t// If the title attribute has changed since open(), don't restore\n\t\tif ( target.data( \"ui-tooltip-title\" ) && !target.attr( \"title\" ) ) {\n\t\t\ttarget.attr( \"title\", target.data( \"ui-tooltip-title\" ) );\n\t\t}\n\n\t\tthis._removeDescribedBy( target );\n\n\t\ttooltipData.hiding = true;\n\t\ttooltip.stop( true );\n\t\tthis._hide( tooltip, this.options.hide, function() {\n\t\t\tthat._removeTooltip( $( this ) );\n\t\t} );\n\n\t\ttarget.removeData( \"ui-tooltip-open\" );\n\t\tthis._off( target, \"mouseleave focusout keyup\" );\n\n\t\t// Remove 'remove' binding only on delegated targets\n\t\tif ( target[ 0 ] !== this.element[ 0 ] ) {\n\t\t\tthis._off( target, \"remove\" );\n\t\t}\n\t\tthis._off( this.document, \"mousemove\" );\n\n\t\tif ( event && event.type === \"mouseleave\" ) {\n\t\t\t$.each( this.parents, function( id, parent ) {\n\t\t\t\t$( parent.element ).attr( \"title\", parent.title );\n\t\t\t\tdelete that.parents[ id ];\n\t\t\t} );\n\t\t}\n\n\t\ttooltipData.closing = true;\n\t\tthis._trigger( \"close\", event, { tooltip: tooltip } );\n\t\tif ( !tooltipData.hiding ) {\n\t\t\ttooltipData.closing = false;\n\t\t}\n\t},\n\n\t_tooltip: function( element ) {\n\t\tvar tooltip = $( \"<div>\" ).attr( \"role\", \"tooltip\" ),\n\t\t\tcontent = $( \"<div>\" ).appendTo( tooltip ),\n\t\t\tid = tooltip.uniqueId().attr( \"id\" );\n\n\t\tthis._addClass( content, \"ui-tooltip-content\" );\n\t\tthis._addClass( tooltip, \"ui-tooltip\", \"ui-widget ui-widget-content\" );\n\n\t\ttooltip.appendTo( this._appendTo( element ) );\n\n\t\treturn this.tooltips[ id ] = {\n\t\t\telement: element,\n\t\t\ttooltip: tooltip\n\t\t};\n\t},\n\n\t_find: function( target ) {\n\t\tvar id = target.data( \"ui-tooltip-id\" );\n\t\treturn id ? this.tooltips[ id ] : null;\n\t},\n\n\t_removeTooltip: function( tooltip ) {\n\n\t\t// Clear the interval for delayed tracking tooltips\n\t\tclearInterval( this.delayedShow );\n\n\t\ttooltip.remove();\n\t\tdelete this.tooltips[ tooltip.attr( \"id\" ) ];\n\t},\n\n\t_appendTo: function( target ) {\n\t\tvar element = target.closest( \".ui-front, dialog\" );\n\n\t\tif ( !element.length ) {\n\t\t\telement = this.document[ 0 ].body;\n\t\t}\n\n\t\treturn element;\n\t},\n\n\t_destroy: function() {\n\t\tvar that = this;\n\n\t\t// Close open tooltips\n\t\t$.each( this.tooltips, function( id, tooltipData ) {\n\n\t\t\t// Delegate to close method to handle common cleanup\n\t\t\tvar event = $.Event( \"blur\" ),\n\t\t\t\telement = tooltipData.element;\n\t\t\tevent.target = event.currentTarget = element[ 0 ];\n\t\t\tthat.close( event, true );\n\n\t\t\t// Remove immediately; destroying an open tooltip doesn't use the\n\t\t\t// hide animation\n\t\t\t$( \"#\" + id ).remove();\n\n\t\t\t// Restore the title\n\t\t\tif ( element.data( \"ui-tooltip-title\" ) ) {\n\n\t\t\t\t// If the title attribute has changed since open(), don't restore\n\t\t\t\tif ( !element.attr( \"title\" ) ) {\n\t\t\t\t\telement.attr( \"title\", element.data( \"ui-tooltip-title\" ) );\n\t\t\t\t}\n\t\t\t\telement.removeData( \"ui-tooltip-title\" );\n\t\t\t}\n\t\t} );\n\t\tthis.liveRegion.remove();\n\t}\n} );\n\n// DEPRECATED\n// TODO: Switch return back to widget declaration at top of file when this is removed\nif ( $.uiBackCompat !== false ) {\n\n\t// Backcompat for tooltipClass option\n\t$.widget( \"ui.tooltip\", $.ui.tooltip, {\n\t\toptions: {\n\t\t\ttooltipClass: null\n\t\t},\n\t\t_tooltip: function() {\n\t\t\tvar tooltipData = this._superApply( arguments );\n\t\t\tif ( this.options.tooltipClass ) {\n\t\t\t\ttooltipData.tooltip.addClass( this.options.tooltipClass );\n\t\t\t}\n\t\t\treturn tooltipData;\n\t\t}\n\t} );\n}\n\nreturn $.ui.tooltip;\n\n});\n"]}