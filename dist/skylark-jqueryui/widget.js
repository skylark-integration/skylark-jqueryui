/**
 * skylark-jqueryui - A version of backbone that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-jqueryui/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils/widgets","skylark-jquery","./version"],function(t,e,i){var s=0,n=Array.prototype.hasOwnProperty,o=Array.prototype.slice;return i.cleanData=function(t){return function(e){var s,n,o;for(o=0;null!=(n=e[o]);o++)s=i._data(n,"events"),s&&s.remove&&i(n).triggerHandler("remove");t(e)}}(i.cleanData),i.widget=function(t,e,s){var n,o,a=t.split(".")[0];t=t.split(".")[1];var r=a+"-"+t;s||(s=e,e=i.Widget),i.isArray(s)&&(s=i.extend.apply(null,[{}].concat(s))),i.expr.pseudos[r.toLowerCase()]=function(t){return!!i.data(t,r)},i[a]=i[a]||{},n=i[a][t];var l=i.widget.extend({widgetEventPrefix:n?e.prototype.widgetEventPrefix||t:t},{options:e.prototype.options},s,{name:r,namespace:a,widgetName:t,widgetFullName:r});return o=i[a][t]=e.inherit(l),i.extend(o,n,{version:s.version,_proto:l,_childConstructors:[]}),n?(i.each(n._childConstructors,function(t,e){var s=e.prototype;i.widget(s.namespace+"."+s.widgetName,o,e._proto)}),delete n._childConstructors):e._childConstructors.push(o),i.widget.bridge(t,o),o},i.widget.extend=function(t){for(var e,s,a=o.call(arguments,1),r=0,l=a.length;r<l;r++)for(e in a[r])s=a[r][e],n.call(a[r],e)&&void 0!==s&&(i.isPlainObject(s)?t[e]=i.isPlainObject(t[e])?i.widget.extend({},t[e],s):i.widget.extend({},s):t[e]=s);return t},i.widget.bridge=function(t,e){var s=e.prototype.widgetFullName||t;i.fn[t]=function(n){var a="string"==typeof n,r=o.call(arguments,1),l=this;return a?this.length||"instance"!==n?this.each(function(){var e,o=i.data(this,s);return"instance"===n?(l=o,!1):o?i.isFunction(o[n])&&"_"!==n.charAt(0)?(e=o[n].apply(o,r),e!==o&&void 0!==e?(l=e&&e.jquery?l.pushStack(e.get()):e,!1):void 0):i.error("no such method '"+n+"' for "+t+" widget instance"):i.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+n+"'")}):l=void 0:(r.length&&(n=i.widget.extend.apply(null,[n].concat(r))),this.each(function(){var t=i.data(this,s);t?(t.option(n||{}),t._init&&t._init()):i.data(this,s,new e(n,this))})),l}},i.Widget=t.Evented.inherit({widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},init:function(t,e){this.options=i.widget.extend({},this.options),this._createWidget(t,e)},_super:function(){if(this.overrided)return this.overrided.apply(this,arguments)},_superApply:function(t){if(this.overrided)return this.overrided.apply(this,t)},_createWidget:function(t,e){e=i(e||this.defaultElement||this)[0],this.element=i(e),this.uuid=s++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=i(),this.hoverable=i(),this.focusable=i(),this.classesElementLookup={},e!==this&&(i.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=i(e.style?e.ownerDocument:e.document||e),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this.options=i.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){var t=this;this._destroy(),i.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:i.noop,widget:function(){return this.element},option:function(t,e){var s,n,o,a=t;if(0===arguments.length)return i.widget.extend({},this.options);if("string"==typeof t)if(a={},s=t.split("."),t=s.shift(),s.length){for(n=a[t]=i.widget.extend({},this.options[t]),o=0;o<s.length-1;o++)n[s[o]]=n[s[o]]||{},n=n[s[o]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=e}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];a[t]=e}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(t){var e,s,n;for(e in t)n=this.classesElementLookup[e],t[e]!==this.options.classes[e]&&n&&n.length&&(s=i(n.get()),this._removeClass(n,e),s.addClass(this._classes({element:s,keys:e,classes:t,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function e(){t.element.each(function(t,e){var s=i.map(o.classesElementLookup,function(t){return t}).some(function(t){return i(t).is(e)});s||o._on(i(e),{remove:"_untrackClassesElement"})})}function s(s,a){var r,l;for(l=0;l<s.length;l++)r=o.classesElementLookup[s[l]]||i(),t.add?(e(),r=i(i.uniqueSort(r.get().concat(t.element.get())))):r=i(r.not(t.element).get()),o.classesElementLookup[s[l]]=r,n.push(s[l]),a&&t.classes[s[l]]&&n.push(t.classes[s[l]])}var n=[],o=this;return t=i.extend({element:this.element,classes:this.options.classes||{}},t),t.keys&&s(t.keys.match(/\S+/g)||[],!0),t.extra&&s(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var e=this;i.each(e.classesElementLookup,function(s,n){i.inArray(t.target,n)!==-1&&(e.classesElementLookup[s]=i(n.not(t.target).get()))}),this._off(i(t.target))},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,s){s="boolean"==typeof s?s:i;var n="string"==typeof t||null===t,o={extra:n?e:i,keys:n?t:e,element:n?this.element:t,add:s};return o.element.toggleClass(this._classes(o),s),this},_on:function(t,e,s){var n,o=this;"boolean"!=typeof t&&(s=e,e=t,t=!1),s?(e=n=i(e),this.bindings=this.bindings.add(e)):(s=e,e=this.element,n=this.widget()),i.each(s,function(s,a){function r(){if(t||o.options.disabled!==!0&&!i(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||i.guid++);var l=s.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?n.on(u,h,r):e.on(u,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(e),this.bindings=i(this.bindings.not(t).get()),this.focusable=i(this.focusable.not(t).get()),this.hoverable=i(this.hoverable.not(t).get())},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(i(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(i(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(i(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(i(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,e,s){var n,o,a=this.options[t];if(s=s||{},e=i.Event(e),e.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),e.target=this.element[0],o=e.originalEvent)for(n in o)n in e||(e[n]=o[n]);return this.element.trigger(e,s),!(i.isFunction(a)&&a.apply(this.element[0],[e].concat(s))===!1||e.isDefaultPrevented())}}),i.Widget._childConstructors=[],i.each({show:"fadeIn",hide:"fadeOut"},function(t,e){i.Widget.prototype["_"+t]=function(s,n,o){"string"==typeof n&&(n={effect:n});var a,r=n?n===!0||"number"==typeof n?e:n.effect||e:t;n=n||{},"number"==typeof n&&(n={duration:n}),a=!i.isEmptyObject(n),n.complete=o,n.delay&&s.delay(n.delay),a&&i.effects&&i.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,o):s.queue(function(e){i(this)[t](),o&&o.call(s[0]),e()})}}),i.widget});
//# sourceMappingURL=sourcemaps/widget.js.map
